<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘ æ¡ƒæ±½æ°´çš„é­”åŠ›è¡¥ç»™ç«™ - å‘¨å¹´åº†å…¸</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ====== åŸºç¡€é‡ç½® ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* æ¡ƒæ±½æ°´ä¸»é¢˜é…è‰² - ç²‰è‰²è°ƒ */
            --color-primary: #FF8EAF;     /* ä¸»ç²‰è‰² */
            --color-primary-light: #FFC8E8; /* æµ…ç²‰è‰² */
            --color-primary-dark: #FF6BAC;  /* æ·±ç²‰è‰² */
            --color-secondary: #98D8C8;    /* ç²¾çµç»¿ */
            --color-accent: #C8A2E9;       /* æ¢¦å¹»ç´« */
            --color-warning: #FFE066;      /* é˜³å…‰é»„ */
            --color-success: #87D37C;      /* æˆåŠŸç»¿ */
            --color-error: #FF6B6B;        /* é”™è¯¯çº¢ */
            --color-text: #5A4A6D;         /* æ·±ç´«è‰²æ–‡å­— */
            --color-text-light: #8A789D;   /* æµ…ç´«è‰²æ–‡å­— */
            --color-bg: #FFF0F5;           /* èƒŒæ™¯ç²‰ */
            --color-card: #FFFFFF;         /* å¡ç‰‡ç™½ */
            --color-border: #FFE4EC;       /* è¾¹æ¡†ç²‰ */
            
            /* å°ºå¯¸ */
            --radius: 12px;
            --radius-sm: 6px;
            --radius-lg: 20px;
            --shadow: 0 4px 15px rgba(255, 140, 175, 0.15);
            --shadow-lg: 0 8px 30px rgba(255, 140, 175, 0.25);
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #FFF0F5 0%, #FFEAF5 100%);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
        }
        
        /* ====== å¸ƒå±€å®¹å™¨ ====== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* é¡µé¢åˆ‡æ¢ */
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
            padding: 20px 0 60px;
        }
        
        .page.active {
            display: block;
        }
        
        /* ====== å¯¼èˆªæ  ====== */
        .navbar {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            text-decoration: none;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .nav-links {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }
        
        .nav-link:hover, .nav-link.active {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* ====== é€šç”¨å¡ç‰‡ ====== */
        .card {
            background: var(--color-card);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--color-border);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--color-border);
        }
        
        .card-title {
            font-size: 1.3rem;
            color: var(--color-primary-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* ====== é¦–é¡µ ====== */
        .hero-section {
            text-align: center;
            padding: 40px 0 30px;
        }
        
        .hero-title {
            font-size: 2.2rem;
            margin-bottom: 15px;
            background: linear-gradient(90deg, var(--color-primary), var(--color-primary-dark));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1.2;
        }
        
        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--color-text-light);
            max-width: 700px;
            margin: 0 auto 30px;
        }
        
        /* è§’è‰²å±•ç¤ºåŒº - ç”¨CSSç»˜åˆ¶ */
        .character-display {
            width: 180px;
            height: 220px;
            margin: 0 auto 30px;
            position: relative;
        }
        
        .character-body {
            position: absolute;
            width: 120px;
            height: 160px;
            background: linear-gradient(135deg, var(--color-primary-light), var(--color-primary));
            border-radius: 60px 60px 40px 40px;
            top: 40px;
            left: 30px;
            box-shadow: 0 10px 20px rgba(255, 140, 175, 0.3);
        }
        
        .character-head {
            position: absolute;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #FFD1DC, #FFB6C1);
            border-radius: 50%;
            top: 0;
            left: 50px;
        }
        
        .character-crown {
            position: absolute;
            width: 60px;
            height: 30px;
            background: var(--color-warning);
            border-radius: 10px 10px 0 0;
            top: -20px;
            left: 60px;
        }
        
        .character-crown::before {
            content: "";
            position: absolute;
            width: 20px;
            height: 25px;
            background: var(--color-warning);
            border-radius: 5px;
            top: -15px;
            left: 20px;
        }
        
        .character-quote {
            font-style: italic;
            color: var(--color-primary-dark);
            margin-top: 20px;
            font-size: 1.1rem;
        }
        
        /* å€’è®¡æ—¶ */
        .countdown-section {
            text-align: center;
            margin: 40px 0;
        }
        
        .countdown-display {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .countdown-item {
            background: white;
            border-radius: var(--radius);
            padding: 20px 15px;
            min-width: 80px;
            box-shadow: var(--shadow);
            border: 2px solid var(--color-primary-light);
        }
        
        .countdown-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--color-primary-dark);
            line-height: 1;
        }
        
        .countdown-label {
            font-size: 0.9rem;
            color: var(--color-text-light);
            margin-top: 5px;
        }
        
        .countdown-message {
            color: var(--color-text-light);
            font-size: 1rem;
            margin-top: 15px;
        }
        
        /* çŠ¶æ€å¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            text-align: center;
            padding: 25px 20px;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--color-primary-dark);
            margin-bottom: 10px;
            line-height: 1;
        }
        
        .stat-label {
            font-size: 1rem;
            color: var(--color-text-light);
        }
        
        /* åŠŸèƒ½å…¥å£ */
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }
        
        .action-card {
            background: linear-gradient(135deg, var(--color-primary-light), var(--color-primary));
            color: white;
            border-radius: var(--radius);
            padding: 30px 25px;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            box-shadow: var(--shadow);
        }
        
        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .action-card.green {
            background: linear-gradient(135deg, var(--color-secondary), #7BC5B5);
        }
        
        .action-card.purple {
            background: linear-gradient(135deg, var(--color-accent), #B08BD9);
        }
        
        .action-card .action-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .action-card h3 {
            font-size: 1.4rem;
            margin-bottom: 10px;
        }
        
        .action-card p {
            font-size: 0.95rem;
            opacity: 0.9;
        }
        
        /* ====== æ¸¸æˆé¡µé¢ ====== */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .game-card {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .game-preview {
            height: 160px;
            background: linear-gradient(135deg, var(--color-primary-light), var(--color-accent));
            border-radius: var(--radius);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .game-preview::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        }
        
        .game-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--color-primary-dark);
        }
        
        .game-description {
            color: var(--color-text-light);
            margin-bottom: 20px;
            flex-grow: 1;
        }
        
        .play-button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-top: auto;
        }
        
        .play-button:hover {
            background: var(--color-primary-dark);
        }
        
        /* ====== è½¬ç›˜é¡µé¢ ====== */
        .wheel-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 0;
        }
        
        .wheel-wrapper {
            position: relative;
            width: 280px;
            height: 280px;
            margin: 0 auto 40px;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                var(--color-primary) 0deg 60deg,
                var(--color-secondary) 60deg 120deg,
                var(--color-warning) 120deg 180deg,
                var(--color-accent) 180deg 240deg,
                #A8E6CF 240deg 300deg,
                #FFB7C5 300deg 360deg
            );
            position: relative;
            transition: transform 3s cubic-bezier(0.17, 0.67, 0.21, 0.99);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
        }
        
        .wheel-pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--color-primary-dark);
            font-size: 2rem;
            z-index: 10;
            filter: drop-shadow(0 0 5px rgba(255, 107, 172, 0.5));
        }
        
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-primary-dark);
            font-size: 1.5rem;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }
        
        .lottery-info {
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .points-display {
            font-size: 2.2rem;
            color: var(--color-primary-dark);
            font-weight: bold;
            margin: 10px 0;
        }
        
        .spin-button {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
            color: white;
            border: none;
            padding: 16px 45px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 30px auto;
            box-shadow: 0 5px 20px rgba(255, 107, 139, 0.4);
        }
        
        .spin-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 107, 139, 0.6);
        }
        
        .spin-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .prizes-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .prize-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            border-left: 4px solid var(--color-primary);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .prize-item:nth-child(2) {
            border-left-color: var(--color-secondary);
        }
        
        .prize-item:nth-child(3) {
            border-left-color: var(--color-warning);
        }
        
        .prize-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--color-primary-dark);
        }
        
        .prize-probability {
            color: var(--color-text-light);
            font-size: 0.9rem;
        }
        
        /* ====== æ’è¡Œæ¦œé¡µé¢ ====== */
        .ranking-table {
            width: 100%;
            overflow-x: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        thead {
            background: linear-gradient(135deg, var(--color-primary-light), var(--color-primary));
        }
        
        th {
            padding: 18px 15px;
            text-align: left;
            font-weight: 600;
            color: white;
            border: none;
        }
        
        td {
            padding: 18px 15px;
            border-bottom: 1px solid var(--color-border);
        }
        
        tr:hover {
            background-color: rgba(255, 142, 175, 0.05);
        }
        
        .rank-badge {
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--color-primary-light);
            color: white;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .rank-1 .rank-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: var(--color-text);
        }
        
        .rank-2 .rank-badge {
            background: linear-gradient(135deg, #C0C0C0, #A0A0A0);
            color: var(--color-text);
        }
        
        .rank-3 .rank-badge {
            background: linear-gradient(135deg, #CD7F32, #A66A28);
            color: white;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.1rem;
        }
        
        .points {
            font-weight: bold;
            color: var(--color-primary-dark);
        }
        
        /* ====== ç•™è¨€æ¿é¡µé¢ ====== */
        .message-board {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
            margin-bottom: 30px;
        }
        
        .message-item {
            background: rgba(255, 255, 255, 0.8);
            border-radius: var(--radius-sm);
            padding: 15px;
            margin-bottom: 15px;
            border-left: 3px solid var(--color-primary);
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .message-user {
            font-weight: bold;
            color: var(--color-primary-dark);
        }
        
        .message-time {
            color: var(--color-text-light);
        }
        
        .message-content {
            color: var(--color-text);
        }
        
        .message-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message-input {
            width: 100%;
            height: 100px;
            padding: 15px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
            transition: var(--transition);
        }
        
        .message-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(255, 142, 175, 0.1);
        }
        
        .submit-button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            align-self: flex-end;
        }
        
        .submit-button:hover {
            background: var(--color-primary-dark);
        }
        
        /* ====== é¡µè„š ====== */
        .footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            border-top: 1px solid var(--color-border);
            color: var(--color-text-light);
            font-size: 0.9rem;
        }
        
        /* ====== åŠ¨ç”» ====== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .spinning {
            animation: spin 3s cubic-bezier(0.17, 0.67, 0.21, 0.99);
        }
        
        /* ====== å“åº”å¼è®¾è®¡ ====== */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                width: 100%;
                justify-content: space-around;
            }
            
            .nav-link {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
            
            .hero-title {
                font-size: 1.8rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .character-display {
                width: 150px;
                height: 190px;
            }
            
            .character-body {
                width: 100px;
                height: 140px;
            }
            
            .character-head {
                width: 70px;
                height: 70px;
                left: 40px;
            }
            
            .character-crown {
                left: 45px;
            }
            
            .countdown-item {
                min-width: 70px;
                padding: 15px 10px;
            }
            
            .countdown-value {
                font-size: 1.7rem;
            }
            
            .action-grid {
                grid-template-columns: 1fr;
            }
            
            .wheel-wrapper {
                width: 240px;
                height: 240px;
            }
            
            .prizes-list {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .hero-title {
                font-size: 1.6rem;
            }
            
            .nav-links {
                flex-wrap: wrap;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
            
            .prizes-list {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="#home" class="logo" data-page="home">
                <div class="logo-icon">
                    <i class="fas fa-crown"></i>
                </div>
                <span>æ¡ƒæ±½æ°´çš„é­”åŠ›è¡¥ç»™ç«™</span>
            </a>
            <div class="nav-links">
                <a href="#home" class="nav-link active" data-page="home">
                    <i class="fas fa-home"></i>
                    <span>é­”åŠ›å¤§å…</span>
                </a>
                <a href="#games" class="nav-link" data-page="games">
                    <i class="fas fa-gamepad"></i>
                    <span>æ”¶é›†é­”åŠ›</span>
                </a>
                <a href="#lottery" class="nav-link" data-page="lottery">
                    <i class="fas fa-gift"></i>
                    <span>ç¥ˆæ„¿è½¬ç›˜</span>
                </a>
                <a href="#ranking" class="nav-link" data-page="ranking">
                    <i class="fas fa-trophy"></i>
                    <span>é­”åŠ›æ¦œå•</span>
                </a>
                <a href="#messages" class="nav-link" data-page="messages">
                    <i class="fas fa-comments"></i>
                    <span>å¥‘çº¦è€…ç•™è¨€</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- é¦–é¡µ -->
    <section id="home" class="page active">
        <div class="container">
            <div class="hero-section">
                <h1 class="hero-title">æ¬¢è¿æ¥åˆ°æ¡ƒæ±½æ°´çš„é­”åŠ›è¡¥ç»™ç«™</h1>
                <p class="hero-subtitle">æ¥è‡ªå¼‚ä¸–ç•Œçš„ç²¾çµå…¬ä¸»éœ€è¦ä½ çš„å¸®åŠ©ï¼é€šè¿‡æ”¶é›†é­”åŠ›ï¼Œå¸®åŠ©å…¬ä¸»ç»´æŒæ¬¡å…ƒè£‚ç¼ï¼Œå¹¶æœ‰æœºä¼šè·å¾—å…¬ä¸»çš„ç‰¹åˆ«ç¤¼ç‰©ï¼</p>
                
                <!-- CSSç»˜åˆ¶çš„æ¡ƒæ±½æ°´è§’è‰² -->
                <div class="character-display">
                    <div class="character-head"></div>
                    <div class="character-crown"></div>
                    <div class="character-body"></div>
                </div>
                
                <p class="character-quote">"å¥‘çº¦è€…ä»¬ï¼Œå¿«æ¥å¸®æˆ‘æ”¶é›†é­”åŠ›å§ï¼"</p>
            </div>
            
            <!-- å€’è®¡æ—¶ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-clock pulse"></i>
                        å‘¨å¹´åº†å€’è®¡æ—¶
                    </h2>
                    <span class="countdown-status" id="countdown-status">è¿›è¡Œä¸­</span>
                </div>
                <div class="countdown-display" id="countdown-display">
                    <!-- å€’è®¡æ—¶ç”±JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <p class="countdown-message" id="countdown-message">
                    è·ç¦»æ¡ƒæ±½æ°´å…¬ä¸»çš„å‘¨å¹´åº†ç›´æ’­è¿˜æœ‰
                </p>
            </div>
            
            <!-- ç”¨æˆ·çŠ¶æ€ -->
            <div class="stats-grid">
                <div class="card stat-card">
                    <div class="stat-value" id="total-points">1,250</div>
                    <div class="stat-label">æˆ‘çš„é­”åŠ›å€¼</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-value" id="rank-position">27</div>
                    <div class="stat-label">æˆ‘çš„æ’å</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-value" id="days-left">15</div>
                    <div class="stat-label">è·ç¦»å‘¨å¹´åº†(å¤©)</div>
                </div>
            </div>
            
            <!-- åŠŸèƒ½å…¥å£ -->
            <div class="action-grid">
                <a href="#games" class="action-card" data-page="games">
                    <div class="action-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h3>æ”¶é›†é­”åŠ›</h3>
                    <p>é€šè¿‡å°æ¸¸æˆä¸ºå…¬ä¸»æ”¶é›†é­”åŠ›</p>
                </a>
                
                <a href="#lottery" class="action-card green" data-page="lottery">
                    <div class="action-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <h3>ç¥ˆæ„¿è½¬ç›˜</h3>
                    <p>æ¶ˆè€—é­”åŠ›æŠ½å–å…¬ä¸»çš„ç¤¼ç‰©</p>
                </a>
                
                <a href="#ranking" class="action-card purple" data-page="ranking">
                    <div class="action-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h3>é­”åŠ›æ¦œå•</h3>
                    <p>æŸ¥çœ‹å¥‘çº¦è€…æ’è¡Œæ¦œ</p>
                </a>
            </div>
            
            <!-- å…¬å‘Š -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-bullhorn"></i>
                        å…¬ä¸»å…¬å‘Š
                    </h2>
                    <span class="pulse" style="color: var(--color-primary-dark);">
                        <i class="fas fa-star"></i> ç›´æ’­å€’è®¡æ—¶
                    </span>
                </div>
                <div id="announcements">
                    <p>ğŸ‰ å¥‘çº¦è€…ä»¬~æ¬¢è¿æ¥åˆ°æˆ‘çš„é­”åŠ›è¡¥ç»™ç«™ï¼</p>
                    <p>ğŸ® å‘¨å¹´åº†ç›´æ’­å°†åœ¨ <strong id="event-date">12æœˆ25æ—¥ 19:00</strong> å¼€å§‹ï¼Œè®°å¾—å‡†æ—¶æ¥å“¦ï¼</p>
                    <p>âœ¨ æ”¶é›†é­”åŠ›æœ€å¤šçš„å‰ååï¼Œæœ¬å…¬ä¸»ä¼šæœ‰ç‰¹åˆ«å¥–åŠ±ï¼</p>
                    <p>ğŸ é­”åŠ›åŒå€æ—¶é—´ï¼šç›´æ’­æœŸé—´ï¼Œä¸è¦é”™è¿‡ï¼</p>
                </div>
            </div>
            
            <!-- ç•™è¨€é¢„è§ˆ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-comments"></i>
                        æœ€æ–°ç•™è¨€
                    </h2>
                    <a href="#messages" class="nav-link" data-page="messages" style="padding: 5px 12px; font-size: 0.9rem;">
                        æŸ¥çœ‹å…¨éƒ¨
                    </a>
                </div>
                <div id="message-preview" class="message-board">
                    <!-- ç•™è¨€é¢„è§ˆç”±JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </section>

    <!-- æ¸¸æˆé¡µé¢ -->
    <section id="games" class="page">
        <div class="container">
            <div class="hero-section">
                <h1 class="hero-title">æ”¶é›†é­”åŠ›æ¸¸æˆåŠ</h1>
                <p class="hero-subtitle">é€‰æ‹©ä½ å–œæ¬¢çš„å°æ¸¸æˆï¼Œä¸ºæ¡ƒæ±½æ°´å…¬ä¸»æ”¶é›†é­”åŠ›èƒ½é‡å§ï¼æ¯æ¬¾æ¸¸æˆéƒ½æœ‰ä¸åŒçš„é­”åŠ›äº§å‡ºå“¦~</p>
            </div>
            
            <div class="games-grid">
                <!-- æ¸¸æˆ1ï¼šæ³¡æ³¡æ¸¸æˆ -->
                <div class="card game-card">
                    <div class="game-preview">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <div class="game-info">
                        <h3 class="game-title">é­”åŠ›æ³¡æ³¡</h3>
                        <p class="game-description">ç‚¹å‡»å±å¹•ä¸Šé£˜è¿‡çš„æ¡ƒè‰²æ°”æ³¡ï¼Œæ¯æ•æ‰ä¸€ä¸ªè·å¾—10ç‚¹é­”åŠ›ã€‚å°å¿ƒç‚¸å¼¹å“¦ï¼</p>
                        <div class="game-meta">
                            <div><i class="fas fa-gem"></i> æ¯æ¬¡æœ€é«˜ï¼š200é­”åŠ›</div>
                            <div><i class="fas fa-clock"></i> å†·å´ï¼š1åˆ†é’Ÿ</div>
                        </div>
                    </div>
                    <button class="play-button" data-game="bubble">
                        <i class="fas fa-play"></i>
                        å¼€å§‹æ¸¸æˆ
                    </button>
                </div>
                
                <!-- æ¸¸æˆ2ï¼šç¬¦æ–‡æ¸¸æˆ -->
                <div class="card game-card">
                    <div class="game-preview">
                        <i class="fas fa-clone"></i>
                    </div>
                    <div class="game-info">
                        <h3 class="game-title">ç¬¦æ–‡å¿«é—ª</h3>
                        <p class="game-description">è®°ä½é­”æ³•ç¬¦æ–‡çš„ä½ç½®å¹¶å®Œæˆé…å¯¹ï¼Œæ¯æ¬¡æˆåŠŸé…å¯¹è·å¾—50ç‚¹é­”åŠ›ã€‚</p>
                        <div class="game-meta">
                            <div><i class="fas fa-gem"></i> æ¯æ¬¡æœ€é«˜ï¼š500é­”åŠ›</div>
                            <div><i class="fas fa-clock"></i> å†·å´ï¼š3åˆ†é’Ÿ</div>
                        </div>
                    </div>
                    <button class="play-button" data-game="rune">
                        <i class="fas fa-play"></i>
                        å¼€å§‹æ¸¸æˆ
                    </button>
                </div>
                
                <!-- æ¸¸æˆ3ï¼šèƒ½é‡æ¸¸æˆ -->
                <div class="card game-card">
                    <div class="game-preview">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="game-info">
                        <h3 class="game-title">èƒ½é‡è“„åŠ›</h3>
                        <p class="game-description">åœ¨æœ€ä½³æ—¶æœºé‡Šæ”¾é­”åŠ›ï¼Œå®Œç¾æ—¶æœºå¯è·å¾—100ç‚¹é­”åŠ›ï¼è€ƒéªŒä½ çš„ååº”åŠ›ã€‚</p>
                        <div class="game-meta">
                            <div><i class="fas fa-gem"></i> æ¯æ¬¡æœ€é«˜ï¼š300é­”åŠ›</div>
                            <div><i class="fas fa-clock"></i> å†·å´ï¼š2åˆ†é’Ÿ</div>
                        </div>
                    </div>
                    <button class="play-button" data-game="energy">
                        <i class="fas fa-play"></i>
                        å¼€å§‹æ¸¸æˆ
                    </button>
                </div>
            </div>
            
            <!-- æ¸¸æˆè¯´æ˜ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-info-circle"></i>
                        æ¸¸æˆè§„åˆ™è¯´æ˜
                    </h2>
                </div>
                <ul style="padding-left: 20px; line-height: 1.8;">
                    <li>æ¯ä¸ªæ¸¸æˆæ¯æ—¥æœ‰é­”åŠ›è·å–ä¸Šé™ï¼Œé˜²æ­¢è¿‡åº¦ç–²åŠ³</li>
                    <li>é­”åŠ›ä¼šåœ¨æ¯æ—¥0ç‚¹æ¸…é›¶ï¼Œè¯·åŠæ—¶ä½¿ç”¨</li>
                    <li>ç›´æ’­æœŸé—´æœ‰é­”åŠ›åŠ æˆæ´»åŠ¨ï¼Œè¯·å…³æ³¨å…¬ä¸»å…¬å‘Š</li>
                    <li>é­”åŠ›å¯ç”¨äºç¥ˆæ„¿è½¬ç›˜æŠ½å¥–ï¼Œå…‘æ¢å…¬ä¸»çš„ç¤¼ç‰©</li>
                    <li>æ¸¸æˆæˆç»©ä¼šè®¡å…¥æ’è¡Œæ¦œï¼Œä¸å…¨ç«™å¥‘çº¦è€…æ¯”æ‹¼</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- æŠ½å¥–é¡µé¢ -->
    <section id="lottery" class="page">
        <div class="container">
            <div class="hero-section">
                <h1 class="hero-title">ç¥ˆæ„¿è½¬ç›˜</h1>
                <p class="hero-subtitle">æ¶ˆè€—é­”åŠ›è¿›è¡Œç¥ˆæ„¿ï¼Œæœ‰æœºä¼šè·å¾—æ¡ƒæ±½æ°´å…¬ä¸»å‡†å¤‡çš„ç‰¹åˆ«ç¤¼ç‰©ï¼æ¯æ¬¡ç¥ˆæ„¿æ¶ˆè€—500é­”åŠ›ã€‚</p>
            </div>
            
            <div class="wheel-container">
                <div class="wheel-wrapper">
                    <div class="wheel" id="prize-wheel"></div>
                    <div class="wheel-pointer">
                        <i class="fas fa-caret-down"></i>
                    </div>
                    <div class="wheel-center">
                        <i class="fas fa-gem"></i>
                    </div>
                </div>
                
                <div class="card lottery-info">
                    <div class="points-display" id="user-points-lottery">1,250</div>
                    <div class="stat-label">å½“å‰å¯ç”¨é­”åŠ›</div>
                    <p style="margin: 15px 0; color: var(--color-text-light);">æ¯æ¬¡ç¥ˆæ„¿æ¶ˆè€—500é­”åŠ›</p>
                    
                    <button class="spin-button" id="spin-button">
                        <i class="fas fa-redo"></i>
                        å¼€å§‹ç¥ˆæ„¿ (æ¶ˆè€—500é­”åŠ›)
                    </button>
                    
                    <p style="margin-top: 20px; font-size: 0.9rem; color: var(--color-text-light);">
                        ä»Šæ—¥å‰©ä½™ç¥ˆæ„¿æ¬¡æ•°ï¼š<span style="color: var(--color-primary-dark); font-weight: bold;" id="free-spins">3</span> æ¬¡
                    </p>
                </div>
            </div>
            
            <!-- å¥–å“åˆ—è¡¨ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-gifts"></i>
                        ç¥ˆæ„¿å¥–å“
                    </h2>
                </div>
                <div class="prizes-list">
                    <div class="prize-item">
                        <div class="prize-name">å…¬ä¸»çš„è¯­éŸ³ç¥ç¦</div>
                        <div class="prize-probability">ä¸­å¥–ç‡: 5%</div>
                    </div>
                    <div class="prize-item">
                        <div class="prize-name">é™å®šæ•°å­—å¾½ç« </div>
                        <div class="prize-probability">ä¸­å¥–ç‡: 10%</div>
                    </div>
                    <div class="prize-item">
                        <div class="prize-name">èˆ°é•¿ç»­è´¹çº¢åŒ…</div>
                        <div class="prize-probability">ä¸­å¥–ç‡: 15%</div>
                    </div>
                    <div class="prize-item">
                        <div class="prize-name">å®ä½“å‘¨è¾¹</div>
                        <div class="prize-probability">ä¸­å¥–ç‡: 2%</div>
                    </div>
                    <div class="prize-item">
                        <div class="prize-name">é­”åŠ›ç¿»å€å¡</div>
                        <div class="prize-probability">ä¸­å¥–ç‡: 30%</div>
                    </div>
                    <div class="prize-item">
                        <div class="prize-name">äº²ç¬”ç­¾åç…§</div>
                        <div class="prize-probability">ä¸­å¥–ç‡: 3%</div>
                    </div>
                </div>
            </div>
            
            <!-- æˆ‘çš„å¥–å“ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-award"></i>
                        æˆ‘çš„å¥–å“
                    </h2>
                </div>
                <div id="my-prizes" style="text-align: center; padding: 20px; color: var(--color-text-light);">
                    è¿˜æ²¡æœ‰å¥–å“ï¼Œå¿«å»ç¥ˆæ„¿å§ï¼
                </div>
            </div>
        </div>
    </section>

    <!-- æ’è¡Œæ¦œé¡µé¢ -->
    <section id="ranking" class="page">
        <div class="container">
            <div class="hero-section">
                <h1 class="hero-title">é­”åŠ›æ¦œå•</h1>
                <p class="hero-subtitle">å±•ç¤ºæ‰€æœ‰ä¸ºæ¡ƒæ±½æ°´å…¬ä¸»æ”¶é›†é­”åŠ›çš„å¥‘çº¦è€…æ’åã€‚å‰10åå°†è·å¾—å…¬ä¸»çš„ç‰¹åˆ«å¥–åŠ±ï¼</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-trophy"></i>
                        ä»Šæ—¥é­”åŠ›ä½¿å¾’æ¦œ
                    </h2>
                    <div style="display: flex; gap: 10px;">
                        <button class="nav-link filter-button active" data-filter="daily" style="padding: 6px 15px; font-size: 0.9rem;">ä»Šæ—¥æ¦œ</button>
                        <button class="nav-link filter-button" data-filter="total" style="padding: 6px 15px; font-size: 0.9rem;">æ€»æ¦œ</button>
                    </div>
                </div>
                
                <div class="ranking-table">
                    <table>
                        <thead>
                            <tr>
                                <th>æ’å</th>
                                <th>å¥‘çº¦è€…</th>
                                <th>é­”åŠ›å€¼</th>
                                <th>ç¥ˆæ„¿æ¬¡æ•°</th>
                                <th>åŠ å…¥æ—¶é—´</th>
                            </tr>
                        </thead>
                        <tbody id="ranking-body">
                            <!-- æ’è¡Œæ¦œæ•°æ®ç”±JSåŠ¨æ€ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
                
                <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--color-border);">
                    <p style="color: var(--color-text-light);">
                        æˆ‘çš„æ’åï¼š<span style="color: var(--color-primary-dark); font-weight: bold;" id="my-rank">ç¬¬27å</span> | 
                        æˆ‘çš„é­”åŠ›ï¼š<span style="color: var(--color-primary-dark); font-weight: bold;" id="my-points">1,250</span>
                    </p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: var(--color-text-light);">
                        æ¦œå•æ¯æ—¥0ç‚¹æ›´æ–°ï¼Œå‰10åå°†è·å¾—å…¬ä¸»çš„ç‰¹åˆ«å¥–åŠ±ï¼
                    </p>
                </div>
            </div>
            
            <!-- å¥–åŠ±è¯´æ˜ -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-award"></i>
                        å¥–åŠ±è¯´æ˜
                    </h2>
                </div>
                <p>æ¯æ—¥é­”åŠ›æ¦œå‰10åçš„å¥‘çº¦è€…å°†è·å¾—æ¡ƒæ±½æ°´å…¬ä¸»çš„ç‰¹åˆ«å¥–åŠ±ï¼š</p>
                <ul style="padding-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li>ç¬¬1åï¼šå…¬ä¸»çš„1å¯¹1è¯­éŸ³ç¥ç¦ + é™å®šå¾½ç« </li>
                    <li>ç¬¬2-3åï¼šå…¬ä¸»çš„è¯­éŸ³ç¥ç¦ + é™å®šå¾½ç« </li>
                    <li>ç¬¬4-10åï¼šé™å®šå¾½ç« </li>
                </ul>
                <p style="margin-top: 15px; color: var(--color-primary-dark);">
                    æ¦œå•æ¯æ—¥0ç‚¹é‡ç½®ï¼Œå¥–åŠ±åœ¨æ¬¡æ—¥ç›´æ’­ä¸­å‘æ”¾ï¼
                </p>
            </div>
        </div>
    </section>

    <!-- ç•™è¨€æ¿é¡µé¢ -->
    <section id="messages" class="page">
        <div class="container">
            <div class="hero-section">
                <h1 class="hero-title">å¥‘çº¦è€…ç•™è¨€æ¿</h1>
                <p class="hero-subtitle">ç»™æ¡ƒæ±½æ°´å…¬ä¸»ç•™è¨€å§ï¼ä½ çš„ç¥ç¦å’Œé¼“åŠ±éƒ½ä¼šæˆä¸ºå…¬ä¸»çš„é­”åŠ›æ¥æº~</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-comment-dots"></i>
                        æ‰€æœ‰ç•™è¨€
                    </h2>
                    <span style="color: var(--color-text-light); font-size: 0.9rem;">
                        <span id="message-count">5</span> æ¡ç•™è¨€
                    </span>
                </div>
                <div id="full-message-board" class="message-board">
                    <!-- å®Œæ•´ç•™è¨€æ¿ç”±JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="message-form">
                    <textarea id="message-input" placeholder="ç»™æ¡ƒæ±½æ°´å…¬ä¸»ç•™è¨€å§~ï¼ˆæœ€å¤š140å­—ï¼‰" maxlength="140" class="message-input"></textarea>
                    <button id="submit-message" class="submit-button">
                        <i class="fas fa-paper-plane"></i> å‘é€ç•™è¨€
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>ã€Œæ¡ƒæ±½æ°´çš„é­”åŠ›è¡¥ç»™ç«™ã€â€”â€” å¼‚ä¸–ç•Œç²¾çµå…¬ä¸»æ¡ƒæ±½æ°´çš„å‘¨å¹´åº†å…¸ç‰¹åˆ«ä¼åˆ’</p>
            <p style="margin-top: 10px;">æœ¬ç½‘ç«™ä»…ä¸ºå‘¨å¹´åº†æ´»åŠ¨ä½¿ç”¨ï¼Œæœ€ç»ˆè§£é‡Šæƒå½’æ¡ƒæ±½æ°´æ‰€æœ‰</p>
            <p style="margin-top: 10px; font-size: 0.8rem;">
                <i class="fas fa-code"></i> çº¯å‰ç«¯ç‰ˆæœ¬ | æ— éœ€åç«¯ | æœ¬åœ°å­˜å‚¨
            </p>
        </div>
    </footer>

    <!-- å¼¹çª—æ¨¡æ¿ -->
    <div id="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;">
        <div id="modal-content" style="background: white; border-radius: var(--radius); padding: 30px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 20px 50px rgba(0,0,0,0.3);">
            <h2 id="modal-title" style="margin-bottom: 20px; color: var(--color-primary-dark);"></h2>
            <div id="modal-body"></div>
            <div style="margin-top: 25px; text-align: right;">
                <button id="modal-close" style="background: var(--color-primary); color: white; border: none; padding: 10px 25px; border-radius: 25px; cursor: pointer; font-weight: bold;">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ============================================
        // é…ç½®æ•°æ®
        // ============================================
        const CONFIG = {
            // æ´»åŠ¨æ—¶é—´é…ç½®ï¼ˆè¯·ä¿®æ”¹ä¸ºæ‚¨çš„å®é™…æ—¶é—´ï¼‰
            EVENT_DATE: '2024-12-25T19:00:00', // å‘¨å¹´åº†ç›´æ’­æ—¶é—´
            SITE_LAUNCH: '2024-12-10T00:00:00', // ç½‘ç«™ä¸Šçº¿æ—¶é—´
            
            // æ¸¸æˆé…ç½®
            GAMES: {
                BUBBLE: { name: 'é­”åŠ›æ³¡æ³¡', pointsPerClick: 10, maxPerSession: 200, cooldown: 60 },
                RUNE: { name: 'ç¬¦æ–‡å¿«é—ª', pointsPerCorrect: 50, maxPerSession: 500, cooldown: 180 },
                ENERGY: { name: 'èƒ½é‡è“„åŠ›', maxPerSession: 300, cooldown: 120 }
            },
            
            // æŠ½å¥–é…ç½®
            LOTTERY: {
                COST_PER_SPIN: 500,
                DAILY_FREE_SPINS: 3,
                PRIZES: [
                    { name: 'å…¬ä¸»çš„è¯­éŸ³ç¥ç¦', probability: 5 },
                    { name: 'é™å®šæ•°å­—å¾½ç« ', probability: 10 },
                    { name: 'èˆ°é•¿ç»­è´¹çº¢åŒ…', probability: 15 },
                    { name: 'å®ä½“å‘¨è¾¹', probability: 2 },
                    { name: 'é­”åŠ›ç¿»å€å¡', probability: 30 },
                    { name: 'äº²ç¬”ç­¾åç…§', probability: 3 },
                    { name: 'ç²¾çµçš„æ„Ÿè°¢', probability: 35 }
                ]
            }
        };

        // ============================================
        // æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
        // ============================================
        
        // ç”¨æˆ·ç®¡ç†å™¨
        class UserManager {
            constructor() {
                this.user = null;
                this.storageKey = 'taoci_user_data';
                this.init();
            }
            
            init() {
                this.loadUser();
                if (!this.user) {
                    this.createNewUser();
                }
                
                // ç›‘å¬é¡µé¢å…³é—­ä¿å­˜æ•°æ®
                window.addEventListener('beforeunload', () => this.saveUser());
            }
            
            createNewUser() {
                const prefixes = ['æ¡ƒè‰²', 'æ±½æ°´', 'ç²¾çµ', 'é­”æ³•', 'æ¢¦å¹»', 'æ˜Ÿå…‰', 'å¯çˆ±'];
                const suffixes = ['å¥‘çº¦è€…', 'ä½¿è€…', 'å­¦å¾’', 'éª‘å£«', 'å®ˆæŠ¤è€…', 'æ—…äºº', 'ç²‰ä¸'];
                const randomPrefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                const randomSuffix = suffixes[Math.floor(Math.random() * suffixes.length)];
                
                this.user = {
                    id: 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                    username: randomPrefix + randomSuffix,
                    avatar: 'default',
                    totalPoints: 1250, // åˆå§‹ç§¯åˆ†
                    dailyPoints: 0,
                    lotterySpins: 0,
                    lastPlayDate: new Date().toDateString(),
                    gameHistory: [],
                    lotteryHistory: [],
                    messages: [],
                    createdAt: new Date().toISOString()
                };
                
                this.saveUser();
                return this.user;
            }
            
            addPoints(points, gameType = '') {
                if (!this.user) return;
                
                this.user.totalPoints += points;
                this.user.dailyPoints += points;
                
                if (gameType) {
                    this.user.gameHistory.push({
                        game: gameType,
                        points: points,
                        time: new Date().toISOString()
                    });
                }
                
                this.saveUser();
                this.updateUI();
            }
            
            usePoints(points) {
                if (!this.user || this.user.totalPoints < points) return false;
                
                this.user.totalPoints -= points;
                this.saveUser();
                this.updateUI();
                return true;
            }
            
            addLotterySpin(prize) {
                if (!this.user) return;
                
                this.user.lotteryHistory.push({
                    prize: prize,
                    time: new Date().toISOString()
                });
                
                this.user.lotterySpins++;
                this.saveUser();
            }
            
            addMessage(content) {
                if (!this.user) return;
                
                this.user.messages.push({
                    content: content,
                    time: new Date().toISOString()
                });
                
                this.saveUser();
            }
            
            saveUser() {
                if (!this.user) return;
                
                try {
                    const data = {
                        user: this.user,
                        expires: Date.now() + (30 * 24 * 60 * 60 * 1000) // 30å¤©
                    };
                    
                    localStorage.setItem(this.storageKey, JSON.stringify(data));
                } catch (error) {
                    console.error('ä¿å­˜ç”¨æˆ·æ•°æ®å¤±è´¥:', error);
                }
            }
            
            loadUser() {
                try {
                    const dataStr = localStorage.getItem(this.storageKey);
                    if (!dataStr) return null;
                    
                    const data = JSON.parse(dataStr);
                    
                    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
                    if (data.expires && data.expires < Date.now()) {
                        localStorage.removeItem(this.storageKey);
                        return null;
                    }
                    
                    this.user = data.user;
                    return this.user;
                } catch (error) {
                    console.error('åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥:', error);
                    return null;
                }
            }
            
            updateUI() {
                // æ›´æ–°é¡µé¢ä¸Šçš„ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
                const pointsElements = document.querySelectorAll('#total-points, #user-points-lottery, #my-points');
                pointsElements.forEach(el => {
                    if (el && this.user) el.textContent = this.user.totalPoints.toLocaleString();
                });
                
                const usernameElements = document.querySelectorAll('.user-username');
                usernameElements.forEach(el => {
                    if (el && this.user) el.textContent = this.user.username;
                });
            }
        }

        // ============================================
        // å€’è®¡æ—¶æ¨¡å—
        // ============================================
        class Countdown {
            constructor(targetDate, displayElementId) {
                this.targetDate = new Date(targetDate);
                this.displayElement = document.getElementById(displayElementId);
                this.messageElement = document.getElementById('countdown-message');
                this.statusElement = document.getElementById('countdown-status');
                this.interval = null;
            }
            
            start() {
                this.update();
                this.interval = setInterval(() => this.update(), 1000);
            }
            
            update() {
                const now = new Date();
                const distance = this.targetDate - now;
                
                if (distance < 0) {
                    this.showEventStarted();
                    clearInterval(this.interval);
                    return;
                }
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                this.displayElement.innerHTML = `
                    <div class="countdown-item">
                        <div class="countdown-value">${days}</div>
                        <div class="countdown-label">å¤©</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value">${hours}</div>
                        <div class="countdown-label">æ—¶</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value">${minutes}</div>
                        <div class="countdown-label">åˆ†</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value">${seconds}</div>
                        <div class="countdown-label">ç§’</div>
                    </div>
                `;
                
                // æ›´æ–°å¤©æ•°æ˜¾ç¤º
                const daysLeftElement = document.getElementById('days-left');
                if (daysLeftElement) {
                    daysLeftElement.textContent = days;
                }
                
                // æ›´æ–°çŠ¶æ€æ¶ˆæ¯
                if (distance < 24 * 60 * 60 * 1000) {
                    this.messageElement.textContent = 'å‘¨å¹´åº†å³å°†å¼€å§‹ï¼Œå‡†å¤‡å¥½è¿æ¥æƒŠå–œäº†å—ï¼Ÿ';
                    this.statusElement.textContent = 'å³å°†å¼€å§‹';
                    this.statusElement.style.color = 'var(--color-warning)';
                } else if (distance < 7 * 24 * 60 * 60 * 1000) {
                    this.messageElement.textContent = 'å‘¨å¹´åº†å³å°†åˆ°æ¥ï¼Œå¼€å§‹æ”¶é›†é­”åŠ›å§ï¼';
                    this.statusElement.textContent = 'å‡†å¤‡ä¸­';
                    this.statusElement.style.color = 'var(--color-primary)';
                } else {
                    this.messageElement.textContent = 'è·ç¦»æ¡ƒæ±½æ°´å…¬ä¸»çš„å‘¨å¹´åº†ç›´æ’­è¿˜æœ‰';
                    this.statusElement.textContent = 'å€’è®¡æ—¶';
                    this.statusElement.style.color = 'var(--color-secondary)';
                }
            }
            
            showEventStarted() {
                this.displayElement.innerHTML = `
                    <div class="countdown-item">
                        <div class="countdown-value">ğŸ‰</div>
                        <div class="countdown-label">å·²å¼€å§‹</div>
                    </div>
                `;
                this.messageElement.textContent = 'å‘¨å¹´åº†ç›´æ’­å·²å¼€å§‹ï¼å¿«æ¥å‚ä¸å§ï¼';
                this.statusElement.textContent = 'è¿›è¡Œä¸­';
                this.statusElement.style.color = 'var(--color-success)';
            }
        }

        // ============================================
        // æ¸¸æˆç®¡ç†å™¨
        // ============================================
        class GameManager {
            constructor(userManager) {
                this.userManager = userManager;
                this.cooldowns = {};
                this.init();
            }
            
            init() {
                // ç»‘å®šæ¸¸æˆæŒ‰é’®äº‹ä»¶
                document.querySelectorAll('.play-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const gameType = e.target.closest('.play-button').dataset.game;
                        this.startGame(gameType);
                    });
                });
            }
            
            startGame(gameType) {
                // æ£€æŸ¥å†·å´æ—¶é—´
                if (this.isOnCooldown(gameType)) {
                    this.showModal('æ¸¸æˆå†·å´ä¸­', `è¯·ç­‰å¾…${this.getCooldownTime(gameType)}ç§’åå†ç©ï¼`);
                    return;
                }
                
                // å¼€å§‹æ¸¸æˆ
                switch(gameType) {
                    case 'bubble':
                        this.playBubbleGame();
                        break;
                    case 'rune':
                        this.playRuneGame();
                        break;
                    case 'energy':
                        this.playEnergyGame();
                        break;
                }
                
                // è®¾ç½®å†·å´æ—¶é—´
                this.setCooldown(gameType);
            }
            
            playBubbleGame() {
                const config = CONFIG.GAMES.BUBBLE;
                const points = Math.floor(Math.random() * 50) + 150; // 150-200ç‚¹
                
                this.userManager.addPoints(points, 'bubble');
                this.showGameResult('é­”åŠ›æ³¡æ³¡', `ä½ æ•æ‰äº†${points/10}ä¸ªæ³¡æ³¡ï¼`, `è·å¾— ${points} ç‚¹é­”åŠ›ï¼`);
            }
            
            playRuneGame() {
                const config = CONFIG.GAMES.RUNE;
                const points = Math.floor(Math.random() * 200) + 300; // 300-500ç‚¹
                
                this.userManager.addPoints(points, 'rune');
                this.showGameResult('ç¬¦æ–‡å¿«é—ª', 'ä½ çš„è®°å¿†åŠ›çœŸä¸é”™ï¼', `è·å¾— ${points} ç‚¹é­”åŠ›ï¼`);
            }
            
            playEnergyGame() {
                const config = CONFIG.GAMES.ENERGY;
                const points = Math.floor(Math.random() * 150) + 150; // 150-300ç‚¹
                
                this.userManager.addPoints(points, 'energy');
                this.showGameResult('èƒ½é‡è“„åŠ›', 'å®Œç¾æ—¶æœºï¼é­”åŠ›çˆ†å‘ï¼', `è·å¾— ${points} ç‚¹é­”åŠ›ï¼`);
            }
            
            isOnCooldown(gameType) {
                if (!this.cooldowns[gameType]) return false;
                return Date.now() < this.cooldowns[gameType];
            }
            
            getCooldownTime(gameType) {
                if (!this.isOnCooldown(gameType)) return 0;
                return Math.ceil((this.cooldowns[gameType] - Date.now()) / 1000);
            }
            
            setCooldown(gameType) {
                const config = CONFIG.GAMES[gameType.toUpperCase()];
                if (!config) return;
                
                this.cooldowns[gameType] = Date.now() + (config.cooldown * 1000);
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                const button = document.querySelector(`.play-button[data-game="${gameType}"]`);
                if (button) {
                    const originalHTML = button.innerHTML;
                    button.disabled = true;
                    button.innerHTML = `<i class="fas fa-clock"></i> å†·å´ä¸­ (${config.cooldown}ç§’)`;
                    
                    setTimeout(() => {
                        button.disabled = false;
                        button.innerHTML = originalHTML;
                    }, config.cooldown * 1000);
                }
            }
            
            showGameResult(title, message, points) {
                this.showModal(title, `
                    <div style="text-align: center; padding: 20px 0;">
                        <div style="font-size: 4rem; color: var(--color-primary); margin-bottom: 20px;">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 style="color: var(--color-primary-dark); margin-bottom: 15px;">${message}</h3>
                        <div style="font-size: 1.8rem; color: var(--color-primary-dark); font-weight: bold; margin: 20px 0;">
                            ${points}
                        </div>
                        <p style="color: var(--color-text-light);">é­”åŠ›å·²æ·»åŠ åˆ°ä½ çš„è´¦æˆ·ï¼</p>
                    </div>
                `);
            }
        }

        // ============================================
        // æŠ½å¥–ç®¡ç†å™¨
        // ============================================
        class LotteryManager {
            constructor(userManager) {
                this.userManager = userManager;
                this.wheel = document.getElementById('prize-wheel');
                this.spinButton = document.getElementById('spin-button');
                this.isSpinning = false;
                this.init();
            }
            
            init() {
                if (this.spinButton) {
                    this.spinButton.addEventListener('click', () => this.spin());
                }
            }
            
            spin() {
                if (this.isSpinning) return;
                
                // æ£€æŸ¥ç§¯åˆ†
                if (!this.userManager.usePoints(CONFIG.LOTTERY.COST_PER_SPIN)) {
                    this.showModal('é­”åŠ›ä¸è¶³', 'ä½ çš„é­”åŠ›ä¸å¤Ÿäº†ï¼Œå¿«å»ç©æ¸¸æˆæ”¶é›†æ›´å¤šé­”åŠ›å§ï¼');
                    return;
                }
                
                this.isSpinning = true;
                this.spinButton.disabled = true;
                this.spinButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ç¥ˆæ„¿ä¸­...';
                
                // éšæœºé€‰æ‹©å¥–å“
                const random = Math.random() * 100;
                let cumulative = 0;
                let selectedPrize = CONFIG.LOTTERY.PRIZES[CONFIG.LOTTERY.PRIZES.length - 1]; // é»˜è®¤æœ€åä¸€ä¸ª
                
                for (const prize of CONFIG.LOTTERY.PRIZES) {
                    cumulative += prize.probability;
                    if (random <= cumulative) {
                        selectedPrize = prize;
                        break;
                    }
                }
                
                // è½¬ç›˜åŠ¨ç”»
                const extraSpins = 5;
                const segmentAngle = 360 / CONFIG.LOTTERY.PRIZES.length;
                const prizeIndex = CONFIG.LOTTERY.PRIZES.indexOf(selectedPrize);
                const targetAngle = 360 * extraSpins + (segmentAngle * prizeIndex) + (segmentAngle / 2);
                
                this.wheel.style.transform = `rotate(${targetAngle}deg)`;
                
                // 3ç§’åæ˜¾ç¤ºç»“æœ
                setTimeout(() => {
                    this.showPrizeResult(selectedPrize);
                    this.userManager.addLotterySpin(selectedPrize);
                    this.updateMyPrizes();
                    
                    // é‡ç½®æŒ‰é’®
                    setTimeout(() => {
                        this.spinButton.disabled = false;
                        this.spinButton.innerHTML = '<i class="fas fa-redo"></i> å¼€å§‹ç¥ˆæ„¿ (æ¶ˆè€—500é­”åŠ›)';
                        this.isSpinning = false;
                        
                        // é‡ç½®è½¬ç›˜
                        this.wheel.style.transition = 'none';
                        this.wheel.style.transform = 'rotate(0deg)';
                        setTimeout(() => {
                            this.wheel.style.transition = 'transform 3s cubic-bezier(0.17, 0.67, 0.21, 0.99)';
                        }, 10);
                    }, 1000);
                }, 3000);
            }
            
            showPrizeResult(prize) {
                const isGrandPrize = prize.probability <= 5;
                
                this.showModal('ç¥ˆæ„¿ç»“æœ', `
                    <div style="text-align: center; padding: 20px 0;">
                        <div style="font-size: 4rem; color: ${isGrandPrize ? '#FFD700' : 'var(--color-primary)'}; margin-bottom: 20px;">
                            ${isGrandPrize ? '<i class="fas fa-crown"></i>' : '<i class="fas fa-gift"></i>'}
                        </div>
                        <h3 style="color: var(--color-primary-dark); margin-bottom: 10px;">${prize.name}</h3>
                        <p style="color: var(--color-text-light); margin-bottom: 20px;">ä¸­å¥–ç‡: ${prize.probability}%</p>
                        <div style="background: var(--color-primary-light); padding: 15px; border-radius: var(--radius-sm); margin: 20px 0;">
                            <p style="margin: 0; color: var(--color-primary-dark);">
                                ${this.getPrizeMessage(prize)}
                            </p>
                        </div>
                        <p style="color: var(--color-text-light); font-size: 0.9rem;">
                            è¯·æˆªå›¾æ­¤é¡µé¢å¹¶è”ç³»æˆ¿ç®¡é¢†å–å¥–åŠ±
                        </p>
                    </div>
                `);
            }
            
            getPrizeMessage(prize) {
                const messages = {
                    'å…¬ä¸»çš„è¯­éŸ³ç¥ç¦': 'æ¡ƒæ±½æ°´å…¬ä¸»å°†äº²è‡ªä¸ºä½ å½•åˆ¶ç¥ç¦è¯­éŸ³ï¼',
                    'é™å®šæ•°å­—å¾½ç« ': 'è·å¾—å‘¨å¹´é™å®šè™šæ‹Ÿå¾½ç« ï¼Œå¯åœ¨ä¸ªäººä¸»é¡µå±•ç¤ºï¼',
                    'èˆ°é•¿ç»­è´¹çº¢åŒ…': 'è·å¾—Bç«™èˆ°é•¿ç»­è´¹çº¢åŒ…ä¸€ä¸ªï¼',
                    'å®ä½“å‘¨è¾¹': 'è·å¾—æ¡ƒæ±½æ°´é™å®šå®ä½“å‘¨è¾¹ä¸€ä»½ï¼',
                    'é­”åŠ›ç¿»å€å¡': 'ä½¿ç”¨å1å°æ—¶å†…è·å¾—åŒå€é­”åŠ›ï¼',
                    'äº²ç¬”ç­¾åç…§': 'è·å¾—æ¡ƒæ±½æ°´äº²ç¬”ç­¾åç…§ç‰‡ä¸€å¼ ï¼',
                    'ç²¾çµçš„æ„Ÿè°¢': 'æ„Ÿè°¢ä½ çš„å‚ä¸ï¼Œä¸‹æ¬¡å¥½è¿ï¼'
                };
                
                return messages[prize.name] || 'æ„Ÿè°¢å‚ä¸æ¡ƒæ±½æ°´çš„å‘¨å¹´åº†å…¸ï¼';
            }
            
            updateMyPrizes() {
                const myPrizesElement = document.getElementById('my-prizes');
                if (!myPrizesElement || !this.userManager.user) return;
                
                const prizes = this.userManager.user.lotteryHistory;
                if (prizes.length === 0) {
                    myPrizesElement.innerHTML = 'è¿˜æ²¡æœ‰å¥–å“ï¼Œå¿«å»ç¥ˆæ„¿å§ï¼';
                    return;
                }
                
                let html = '<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;">';
                prizes.slice(-6).reverse().forEach(prize => {
                    const time = new Date(prize.time).toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' });
                    html += `
                        <div style="background: rgba(255, 255, 255, 0.8); border-radius: var(--radius-sm); padding: 12px; text-align: center; border-left: 3px solid var(--color-primary);">
                            <div style="font-weight: bold; color: var(--color-primary-dark); margin-bottom: 5px;">${prize.prize.name}</div>
                            <div style="font-size: 0.8rem; color: var(--color-text-light);">${time}</div>
                        </div>
                    `;
                });
                html += '</div>';
                
                myPrizesElement.innerHTML = html;
            }
        }

        // ============================================
        // æ’è¡Œæ¦œç®¡ç†å™¨
        // ============================================
        class RankManager {
            constructor(userManager) {
                this.userManager = userManager;
                this.rankingBody = document.getElementById('ranking-body');
                this.filterButtons = document.querySelectorAll('.filter-button');
                this.currentFilter = 'daily';
                this.init();
            }
            
            init() {
                // ç»‘å®šç­›é€‰æŒ‰é’®
                this.filterButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        const filter = e.target.dataset.filter;
                        this.setFilter(filter);
                    });
                });
                
                // åˆå§‹åŠ è½½
                this.loadRanking();
                
                // å®šæœŸæ›´æ–°
                setInterval(() => this.loadRanking(), 30000);
            }
            
            setFilter(filter) {
                this.currentFilter = filter;
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                this.filterButtons.forEach(button => {
                    if (button.dataset.filter === filter) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                });
                
                this.loadRanking();
            }
            
            loadRanking() {
                // æ¨¡æ‹Ÿæ’è¡Œæ¦œæ•°æ®
                const mockUsers = [
                    { id: 'user_001', username: 'æ¡ƒæ±½æ°´å¤´å·ç²‰ä¸', points: 8425, spins: 12, joinTime: 'ä»Šå¤© 14:30' },
                    { id: 'user_002', username: 'æ°”æ³¡æ•æ‰å¤§å¸ˆ', points: 7892, spins: 10, joinTime: 'ä»Šå¤© 13:15' },
                    { id: 'user_003', username: 'é­”æ³•é˜µç ”ç©¶å‘˜', points: 6534, spins: 8, joinTime: 'ä»Šå¤© 12:45' },
                    { id: 'user_004', username: 'æ¬¡å…ƒæ—…è¡Œè€…', points: 5921, spins: 7, joinTime: 'ä»Šå¤© 11:20' },
                    { id: 'user_005', username: 'ç²¾çµå¥‘çº¦è€…', points: 4876, spins: 6, joinTime: 'ä»Šå¤© 10:05' },
                    { id: 'user_006', username: 'æ¡ƒè‰²æ¢¦å¢ƒ', points: 4210, spins: 5, joinTime: 'ä»Šå¤© 09:30' },
                    { id: 'user_007', username: 'æ±½æ°´çˆ±å¥½è€…', points: 3987, spins: 4, joinTime: 'ä»Šå¤© 08:45' },
                    { id: 'user_008', username: 'æ°¸æ’å¥‘çº¦', points: 3654, spins: 4, joinTime: 'ä»Šå¤© 08:10' },
                    { id: 'user_009', username: 'é­”æ³•å­¦å¾’', points: 3210, spins: 3, joinTime: 'æ˜¨å¤© 23:30' },
                    { id: 'user_010', username: 'æ˜Ÿå…‰å®ˆæŠ¤è€…', points: 2987, spins: 3, joinTime: 'æ˜¨å¤© 22:15' }
                ];
                
                // å¦‚æœæ˜¯æ€»æ¦œï¼Œè°ƒæ•´åˆ†æ•°
                const users = this.currentFilter === 'total' 
                    ? mockUsers.map(user => ({ ...user, points: user.points * 3 }))
                    : mockUsers;
                
                // ç”ŸæˆHTML
                let html = '';
                users.forEach((user, index) => {
                    const rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : '';
                    const avatarChar = user.username.charAt(0);
                    
                    html += `
                        <tr class="${rankClass}">
                            <td>
                                <span class="rank-badge">${index + 1}</span>
                            </td>
                            <td>
                                <div class="user-info">
                                    <div class="user-avatar">${avatarChar}</div>
                                    <div>
                                        <div>${user.username}</div>
                                        <div style="font-size: 0.8rem; color: var(--color-text-light);">ID: ${user.id.substring(0, 8)}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="points">${user.points.toLocaleString()}</td>
                            <td>${user.spins}</td>
                            <td>${user.joinTime}</td>
                        </tr>
                    `;
                });
                
                if (this.rankingBody) {
                    this.rankingBody.innerHTML = html;
                }
                
                // æ›´æ–°æˆ‘çš„æ’åæ˜¾ç¤º
                this.updateMyRank();
            }
            
            updateMyRank() {
                const myRankElement = document.getElementById('my-rank');
                const myPointsElement = document.getElementById('my-points');
                
                if (myRankElement && myPointsElement && this.userManager.user) {
                    // æ¨¡æ‹Ÿè®¡ç®—æ’å
                    const myPoints = this.userManager.user.totalPoints;
                    const rank = myPoints > 8000 ? 1 : 
                                 myPoints > 7000 ? 2 : 
                                 myPoints > 6000 ? 3 : 
                                 myPoints > 5000 ? 4 : 
                                 myPoints > 4000 ? 5 : 
                                 myPoints > 3000 ? 10 : 
                                 myPoints > 2000 ? 20 : 30;
                    
                    myRankElement.textContent = `ç¬¬${rank}å`;
                    myPointsElement.textContent = myPoints.toLocaleString();
                }
            }
        }

        // ============================================
        // ç•™è¨€æ¿ç®¡ç†å™¨
        // ============================================
        class MessageManager {
            constructor(userManager) {
                this.userManager = userManager;
                this.messageInput = document.getElementById('message-input');
                this.submitButton = document.getElementById('submit-message');
                this.messagePreview = document.getElementById('message-preview');
                this.fullMessageBoard = document.getElementById('full-message-board');
                this.messageCount = document.getElementById('message-count');
                this.init();
            }
            
            init() {
                // ç»‘å®šæäº¤æŒ‰é’®
                if (this.submitButton) {
                    this.submitButton.addEventListener('click', () => this.submitMessage());
                }
                
                // åˆå§‹åŠ è½½
                this.loadMessages();
                this.loadMessagePreview();
                
                // å®šæœŸåˆ·æ–°
                setInterval(() => {
                    this.loadMessages();
                    this.loadMessagePreview();
                }, 60000);
            }
            
            submitMessage() {
                if (!this.messageInput || !this.userManager.user) return;
                
                const content = this.messageInput.value.trim();
                if (!content) {
                    this.showModal('æç¤º', 'è¯·è¾“å…¥ç•™è¨€å†…å®¹ï¼');
                    return;
                }
                
                if (content.length > 140) {
                    this.showModal('æç¤º', 'ç•™è¨€ä¸èƒ½è¶…è¿‡140å­—ï¼');
                    return;
                }
                
                // æ·»åŠ åˆ°ç”¨æˆ·æ¶ˆæ¯
                this.userManager.addMessage(content);
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                this.messageInput.value = '';
                
                // é‡æ–°åŠ è½½æ¶ˆæ¯
                this.loadMessages();
                this.loadMessagePreview();
                
                this.showModal('ç•™è¨€æˆåŠŸ', 'ä½ çš„ç•™è¨€å·²å‘é€ï¼æ¡ƒæ±½æ°´å…¬ä¸»ä¼šçœ‹åˆ°ä½ çš„ç¥ç¦å“¦~');
            }
            
            loadMessages() {
                // æ¨¡æ‹Ÿæ¶ˆæ¯æ•°æ®
                const mockMessages = [
                    { user: 'æ¡ƒæ±½æ°´å¤´å·ç²‰ä¸', content: 'å…¬ä¸»æ®¿ä¸‹å‘¨å¹´å¿«ä¹ï¼æœŸå¾…ä»Šæ™šçš„ç›´æ’­ï¼', time: '2024-12-10T10:30:00' },
                    { user: 'æ°”æ³¡æ•æ‰å¤§å¸ˆ', content: 'å·²ç»æ”’äº†1000é­”åŠ›äº†ï¼Œæˆ‘è¦æŠ½å¤§å¥–ï¼', time: '2024-12-10T11:15:00' },
                    { user: 'é­”æ³•é˜µç ”ç©¶å‘˜', content: 'è®°å¿†ç¬¦æ–‡é˜µçš„æ¸¸æˆçœŸå¥½ç©ï¼Œå·²ç»ç©äº†10éäº†ï¼', time: '2024-12-10T12:45:00' },
                    { user: 'æ¬¡å…ƒæ—…è¡Œè€…', content: 'ä»å¼‚ä¸–ç•Œèµ¶æ¥æ”¯æŒå…¬ä¸»ï¼å¸Œæœ›ç½‘ç«™èƒ½ä¸€ç›´ä¿ç•™ï¼', time: '2024-12-10T14:20:00' },
                    { user: 'ç²¾çµå¥‘çº¦è€…', content: 'æ¡ƒæ±½æ°´å…¬ä¸»æœ€å¯çˆ±äº†ï¼å¸Œæœ›æ¯å¹´éƒ½æœ‰å‘¨å¹´åº†ï¼', time: '2024-12-10T15:30:00' },
                    { user: 'æ¡ƒè‰²æ¢¦å¢ƒ', content: 'è½¬ç›˜æŠ½åˆ°äº†è¯­éŸ³ç¥ç¦ï¼å¤ªå¼€å¿ƒäº†ï¼', time: '2024-12-10T16:45:00' },
                    { user: 'æ°¸æ’å¥‘çº¦', content: 'å…¬ä¸»çš„ç½‘ç«™è®¾è®¡å¾—çœŸå¥½ï¼Œæ¸¸æˆä¹Ÿå¾ˆæœ‰è¶£ï¼', time: '2024-12-10T18:20:00' }
                ];
                
                // æ·»åŠ ç”¨æˆ·è‡ªå·±çš„æ¶ˆæ¯
                if (this.userManager.user && this.userManager.user.messages) {
                    this.userManager.user.messages.forEach(msg => {
                        mockMessages.unshift({
                            user: this.userManager.user.username,
                            content: msg.content,
                            time: msg.time
                        });
                    });
                }
                
                // ç”Ÿæˆå®Œæ•´ç•™è¨€æ¿HTML
                if (this.fullMessageBoard) {
                    let html = '';
                    mockMessages.forEach(msg => {
                        const time = new Date(msg.time).toLocaleDateString('zh-CN', { 
                            month: 'short', 
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                        
                        html += `
                            <div class="message-item">
                                <div class="message-header">
                                    <span class="message-user">${msg.user}</span>
                                    <span class="message-time">${time}</span>
                                </div>
                                <div class="message-content">${msg.content}</div>
                            </div>
                        `;
                    });
                    
                    this.fullMessageBoard.innerHTML = html;
                    this.messageCount.textContent = mockMessages.length;
                }
            }
            
            loadMessagePreview() {
                // æ¨¡æ‹Ÿæ¶ˆæ¯é¢„è§ˆï¼ˆå‰3æ¡ï¼‰
                const mockMessages = [
                    { user: 'æ¡ƒæ±½æ°´å¤´å·ç²‰ä¸', content: 'å…¬ä¸»æ®¿ä¸‹å‘¨å¹´å¿«ä¹ï¼æœŸå¾…ä»Šæ™šçš„ç›´æ’­ï¼', time: 'ä»Šå¤© 10:30' },
                    { user: 'æ°”æ³¡æ•æ‰å¤§å¸ˆ', content: 'å·²ç»æ”’äº†1000é­”åŠ›äº†ï¼Œæˆ‘è¦æŠ½å¤§å¥–ï¼', time: 'ä»Šå¤© 11:15' },
                    { user: 'é­”æ³•é˜µç ”ç©¶å‘˜', content: 'è®°å¿†ç¬¦æ–‡é˜µçš„æ¸¸æˆçœŸå¥½ç©ï¼Œå·²ç»ç©äº†10éäº†ï¼', time: 'ä»Šå¤© 12:45' }
                ];
                
                if (this.messagePreview) {
                    let html = '';
                    mockMessages.forEach(msg => {
                        html += `
                            <div class="message-item">
                                <div class="message-header">
                                    <span class="message-user">${msg.user}</span>
                                    <span class="message-time">${msg.time}</span>
                                </div>
                                <div class="message-content">${msg.content}</div>
                            </div>
                        `;
                    });
                    
                    this.messagePreview.innerHTML = html;
                }
            }
        }

        // ============================================
        // å·¥å…·å‡½æ•°
        // ============================================
        function showModal(title, content) {
            const overlay = document.getElementById('modal-overlay');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const closeButton = document.getElementById('modal-close');
            
            if (!overlay || !modalTitle || !modalBody) return;
            
            modalTitle.textContent = title;
            modalBody.innerHTML = content;
            overlay.style.display = 'flex';
            
            // å…³é—­æŒ‰é’®äº‹ä»¶
            if (closeButton) {
                closeButton.onclick = () => {
                    overlay.style.display = 'none';
                };
            }
            
            // ç‚¹å‡»é®ç½©å±‚å…³é—­
            overlay.onclick = (e) => {
                if (e.target === overlay) {
                    overlay.style.display = 'none';
                }
            };
        }

        // ============================================
        // é¡µé¢åˆå§‹åŒ–
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // 1. åˆå§‹åŒ–ç”¨æˆ·ç®¡ç†å™¨
            const userManager = new UserManager();
            
            // 2. åˆå§‹åŒ–å€’è®¡æ—¶
            const countdown = new Countdown(CONFIG.EVENT_DATE, 'countdown-display');
            countdown.start();
            
            // 3. åˆå§‹åŒ–æ¸¸æˆç®¡ç†å™¨
            const gameManager = new GameManager(userManager);
            
            // 4. åˆå§‹åŒ–æŠ½å¥–ç®¡ç†å™¨
            const lotteryManager = new LotteryManager(userManager);
            
            // 5. åˆå§‹åŒ–æ’è¡Œæ¦œç®¡ç†å™¨
            const rankManager = new RankManager(userManager);
            
            // 6. åˆå§‹åŒ–ç•™è¨€æ¿ç®¡ç†å™¨
            const messageManager = new MessageManager(userManager);
            
            // 7. é¡µé¢åˆ‡æ¢åŠŸèƒ½
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // è·å–ç›®æ ‡é¡µé¢
                    const targetPage = this.getAttribute('data-page');
                    
                    // æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
                    navLinks.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // åˆ‡æ¢é¡µé¢æ˜¾ç¤º
                    pages.forEach(page => {
                        page.classList.remove('active');
                        if (page.id === targetPage) {
                            page.classList.add('active');
                            
                            // æ»šåŠ¨åˆ°é¡¶éƒ¨
                            window.scrollTo(0, 0);
                            
                            // é¡µé¢ç‰¹å®šåˆå§‹åŒ–
                            if (targetPage === 'lottery') {
                                lotteryManager.updateMyPrizes();
                            }
                        }
                    });
                    
                    // æ›´æ–°URLå“ˆå¸Œ
                    window.location.hash = targetPage;
                });
            });
            
            // 8. å¤„ç†URLå“ˆå¸Œç›´æ¥è®¿é—®
            if (window.location.hash) {
                const hash = window.location.hash.replace('#', '');
                const targetLink = document.querySelector(`.nav-link[data-page="${hash}"]`);
                if (targetLink) {
                    targetLink.click();
                }
            }
            
            // 9. è®¾ç½®äº‹ä»¶æ—¥æœŸæ˜¾ç¤º
            const eventDate = new Date(CONFIG.EVENT_DATE);
            const eventDateElement = document.getElementById('event-date');
            if (eventDateElement) {
                eventDateElement.textContent = `${eventDate.getMonth() + 1}æœˆ${eventDate.getDate()}æ—¥ ${eventDate.getHours()}:${eventDate.getMinutes().toString().padStart(2, '0')}`;
            }
            
            console.log('ğŸ‘ æ¡ƒæ±½æ°´çš„é­”åŠ›è¡¥ç»™ç«™å·²åŠ è½½å®Œæˆï¼');
            console.log('ç”¨æˆ·ID:', userManager.user?.id);
        });
    </script>
</body>
</html>
