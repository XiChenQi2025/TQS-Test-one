<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘ æ¡ƒæ±½æ°´çš„é­”åŠ›è¡¥ç»™ç«™ - å¼‚ä¸–ç•Œç²¾çµå…¬ä¸»çš„å‘¨å¹´åº†å…¸</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* ä¸´æ—¶æ ·å¼ç¡®ä¿åŸºç¡€å¸ƒå±€ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            min-height: 100vh;
        }
        
        #app {
            min-height: calc(100vh - 140px);
        }
        
        /* ç¡®ä¿é¡µé¢åˆ‡æ¢æ—¶æœ‰å¹³æ»‘è¿‡æ¸¡ */
        .page {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .page.active {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav id="navbar" class="navbar"></nav>
    
    <!-- ä¸»åº”ç”¨å®¹å™¨ -->
    <main id="app" class="container">
        <!-- å†…å®¹ç”±JavaScriptåŠ¨æ€åŠ è½½ -->
        <div class="loading-container">
            <div class="loading-spinner rainbow-bg"></div>
            <p class="loading-text rainbow-text">æ¡ƒæ±½æ°´çš„é­”åŠ›è¡¥ç»™ç«™åŠ è½½ä¸­...</p>
        </div>
    </main>
    
    <!-- é¡µè„š -->
    <footer id="footer" class="footer"></footer>
    
    <!-- é…ç½®æ–‡ä»¶ -->
    <script src="config.js"></script>
    
    <!-- æ ¸å¿ƒæ¨¡å— -->
    <script src="user-manager.js"></script>
    <script src="countdown.js"></script>
    <script src="app.js"></script>
    
    <script>
        // ç®€å•çš„é”™è¯¯å¤„ç†
        window.addEventListener('error', function(e) {
            console.error('å…¨å±€é”™è¯¯:', e.error);
            const app = document.getElementById('app');
            if (app) {
                app.innerHTML = `
                    <div class="error-container">
                        <h2 class="rainbow-text">åŠ è½½å‡ºé”™</h2>
                        <p>${e.error?.message || 'æœªçŸ¥é”™è¯¯'}</p>
                        <button class="btn-rainbow" onclick="location.reload()">é‡æ–°åŠ è½½</button>
                    </div>
                `;
            }
        });
        
        // åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯
        function showLoadError(module) {
            const app = document.getElementById('app');
            if (app) {
                app.innerHTML = `
                    <div class="error-container">
                        <h2 class="rainbow-text">æ¨¡å—åŠ è½½å¤±è´¥</h2>
                        <p>æ— æ³•åŠ è½½ ${module}ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</p>
                        <button class="btn-rainbow" onclick="location.reload()">é‡æ–°åŠ è½½</button>
                    </div>
                `;
            }
        }
        
        // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        function checkFileExists(url, callback) {
            fetch(url, { method: 'HEAD' })
                .then(response => callback(response.ok))
                .catch(() => callback(false));
        }
        
        // æ£€æŸ¥å¿…è¦æ–‡ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            const requiredFiles = [
                'config.js',
                'user-manager.js',
                'app.js',
                'style.css'
            ];
            
            let missingFiles = [];
            
            requiredFiles.forEach(file => {
                checkFileExists(file, function(exists) {
                    if (!exists && !missingFiles.includes(file)) {
                        missingFiles.push(file);
                    }
                    
                    // å¦‚æœæ‰€æœ‰æ–‡ä»¶éƒ½æ£€æŸ¥å®Œæ¯•
                    if (missingFiles.length > 0) {
                        showLoadError(`ç¼ºå°‘æ–‡ä»¶: ${missingFiles.join(', ')}`);
                    }
                });
            });
        });
    </script>
</body>
</html>
